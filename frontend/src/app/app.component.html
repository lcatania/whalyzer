<drag-scroll>
  <div #map class="w-screen h-screen flex flex-col overflow-visible">
    @for (row of baseTileLayer;let rowIndex = $index; track rowIndex) {
    <div class="w-full h-full flex">
      @for (cell of row;let colIndex = $index; track colIndex ) {
      <div (click)="baseSelected()"
        class=" aspect-square w-[64px] h-[64px] flex items-center justify-center text-black hover:bg-green-200 bg-green-300  relative">
        @if (midTileLayer[rowIndex][colIndex]) {
        <div (click)="entitySelected($event, rowIndex, colIndex)"
          [style.background-image]="'url(' + midTileLayer[rowIndex][colIndex]?.icon + ')'"
          class="group aspect-square w-[64px] h-[64px] flex items-center justify-center text-white absolute z-10">
          <div
            [class]="'pixel-border absolute top-0 right-2 w-[10px] h-[10px] ' + (midTileLayer[rowIndex][colIndex]?.state | stateToColor)">
          </div>
          <div
            class="group-hover:opacity-100 pixel-border bg-gray-100 p-1 min-w-[100px] flex justify-center text-zinc-900 opacity-0 transition-opacity absolute -top-10">
            {{midTileLayer[rowIndex][colIndex]?.name}}
          </div>
        </div>
        }
      </div>
      }
    </div>
    }
    <!--<div class="w-[100px] h-[2px] top-[200px] bg-black absolute"></div>-->
  </div>
</drag-scroll>

@if (isCreateContainerModalVisible) {
<div class="pixel-border absolute top-0 left-0 w-2/4 h-full bg-sky-200 z-30">
  <div class="flex flex-col h-full">
    <div class=" h-16 w-full flex justify-between items-center px-6">
      <div class="flex gap-x-5 items-center">
        <div [class]="'pixel-border w-[10px] h-[10px] ' + (selectedContainer.state | stateToColor)">
        </div>
        <span class="text-2xl">{{selectedContainer.state}} ({{selectedContainer.status}})</span>
      </div>
      <button class="base-button w-8 h-8" (click)="dismissModal()">X</button>
    </div>
    <div class="flex-1 flex-col flex gap-y-3 px-5 ">
      <span class="text-3xl">Name:</span>
      <input class="pixel-border base-input" placeholder="Awesome Container" readonly
        [value]="selectedContainer.name" />
      <span class="text-3xl">Image:</span>
      <input class="pixel-border base-input" placeholder="Awesome Container" readonly
        [value]="selectedContainer.image" />
      <span class="text-3xl">Ports:</span>
      @for (port of selectedContainer.ports; track $index) {
      <span>{{port.privatePort}} : {{port.publicPort}}</span>
      }
      @empty {
      <span class="text-2xl">No ports exposed :(</span>
      }
      <span class="text-3xl">Mounts:</span>
      @for (mount of selectedContainer.mounts; track $index) {
      <span class="text-2xl">{{mount.destination}} : {{mount.source}}</span>
      }
      @empty {
      <span>No mounts :(</span>
      }
    </div>

    <div class="flex justify-end items-center gap-x-8 pe-6 h-20 w-full">
      <!-- <button class="base-button ">Stop</button> -->
    </div>

  </div>

</div>
}
